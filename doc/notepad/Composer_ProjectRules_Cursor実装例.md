# R言語プロジェクトルールのCursor実装例

#cursor #composer #rules_for_ai #実装例 #R #tdd #ドキュメント #git #バージョン管理

> [!NOTE]
> このファイルは[[Composer_ProjectRulesTDD]]から分割された、Cursorでの具体的な実装例を示すものです。

## Cursorでのプロジェクトルール設定方法

Cursorでプロジェクトルールを適用するには、`.cursor/rules`ディレクトリに以下のような内容のルールファイルを作成します。このファイルを作成することで、AIアシスタントに対してプロジェクト固有の開発・ドキュメント規約を指示できます。

### ルールファイルの設置

1. プロジェクトのルートディレクトリに`.cursor`ディレクトリを作成（存在しない場合）
2. その中に`rules`ディレクトリを作成
3. 任意の名前で`.mdc`拡張子のファイル（例: `r-bioinformatics-tdd.mdc`）を作成

### ルールファイルの内容例

```
---
Description: テスト駆動開発（TDD）とドキュメント標準 - R言語生物情報学
Globs: **/*.R, **/*.Rmd
---

# R言語生物情報学のための開発・ドキュメント標準

## 基本原則
- 常に実装コードの前にテストを書くこと（TDD）
- Red-Green-Refactorサイクルに従うこと
- 再現性を最優先し、全ての解析ステップを明示的に記録する
- FAIR原則（Findable, Accessible, Interoperable, Reusable）に準拠する

## コーディングスタイル
- 基本的にtidyverseスタイルに従う
- 生物情報学系パッケージ利用時はBioconductor規約に従う
- ドキュメンテーションはroxygen2形式で記述

## ドキュメント
- 各解析ステップはR Markdownで記録
- 複雑なパイプラインはSnakemake/Nextflowで定義
- 実験メタデータはISA-Tab形式で記述
- すべての環境設定を記録（sessionInfo()）

## デバッグとロギング
- 内部ロギングはfutile.logger、ユーザー出力はcliを使用
- 大規模オブジェクトの直接ロギングは避ける
- ループ内では最小限のロギングに留める

## パッケージ管理
- パッケージ管理には`renv`を使用する
- 新しい依存関係を追加した場合は`renv::snapshot()`を実行
- プロジェクトクローン後は`renv::restore()`を実行
- テスト環境でも確実にrenv環境を使用するよう設定

## テスト実装
- ユニットテストには`testthat`パッケージを使用する
- `expect_*()`関数で明確な検証を行う
- context()関数でテストグループを論理的に整理する
- 各テストは独立して実行可能であること
- テストカバレッジ80%以上を目標とする

## バージョン管理
- すべてのコードはGitで管理し、定期的にリモートリポジトリにプッシュする
- 大規模データファイルは`.gitignore`で除外し、DVCで管理
- コミットメッセージは規約に従う（タイプ: タイトル）形式
- 機能開発はfeatureブランチで行い、PRを通じてマージする
- パッケージ依存関係変更時は必ず`renv.lock`をコミットする
- セマンティックバージョニングに従ってタグ付けする
```

## Composerプロンプト例とその他の使用例

実際の開発を指示する際のプロンプト例とテンプレートについては、以下のファイルを参照してください：

- [[Composer_プロンプトテンプレート]] - プロンプトの基本テンプレート集
- [[Composer_具体例_TCGA解析パイプライン]] - TCGAデータ解析パイプラインの具体的な開発例 